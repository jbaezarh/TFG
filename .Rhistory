datos %>%
st_drop_geometry() %>%
group_by(month(date,label=T),fire) %>%
summarize(AVG_PRECTOTCORR = mean(PRECTOTCORR),
Mes = `month(date, label = T)`) %>%
ggplot(aes(x=Mes,y=AVG_PRECTOTCORR,fill=fire)) +
geom_col(position="dodge",alpha=0.8)
datos %>%
st_drop_geometry() %>%
group_by(month(date,label=T),fire) %>%
summarize(AVG_PRECTOTCORR = mean(PRECTOTCORR),
Mes = `month(date, label = T)`) %>%
ggplot(aes(x=Mes,y=AVG_PRECTOTCORR,fill=fire)) +
geom_col(position="dodge",alpha=0.8) +
scale_fill_hue(direction = -1) +
theme_minimal()
theme(axis.text.x = element_text(angle = 45, vjust = 0.5, hjust=0.5))
datos %>%
st_drop_geometry() %>%
group_by(month(date,label=T),fire) %>%
summarize(AVG_NDVI = mean(NDVI),
Mes = `month(date, label = T)`) %>%
ggplot(aes(x=Mes,y=AVG_NDVI,fill=fire)) +
geom_col(position="dodge",alpha=0.8) +
scale_fill_hue(direction = -1) +
theme_minimal()
ggplot(data = prov) +
geom_sf() +
geom_sf(data = datos, aes(color=poblacion,size = poblacion,alpha=poblacion/median(poblacion))) +
scale_color_gradientn(colours = rainbow(5,rev=T)) +
guides(size="none",alpha="none") +
# scale_color_gradient(low="blue", high="red")+
ggtitle("Distribución espacial de poblacion") + theme_minimal() +
theme(axis.text.x=element_blank(),
axis.ticks.x=element_blank(),
axis.text.y=element_blank(),
axis.ticks.y=element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank())
# theme(axis.text.x=element_blank(),
#       axis.ticks.x=element_blank(),
#       axis.text.y=element_blank(),
#       axis.ticks.y=element_blank(),
#       panel.grid.major = element_blank(),
#       panel.grid.minor = element_blank())
ggplot(data = prov) +
geom_sf() +
geom_sf(data = datos, aes(color=poblacion,size = poblacion,alpha=poblacion/median(poblacion))) +
scale_color_gradientn(colours = rainbow(5,rev=T)) +
guides(size="none",alpha="none") +
# scale_color_gradient(low="blue", high="red")+
ggtitle("Distribución espacial de poblacion") +
theme_minimal() #+
ggplot(data = prov) +
geom_sf() +
geom_sf(data = datos, aes(color=dens_poblacion, size= dens_poblacion, alpha=dens_poblacion)) +
# facet_wrap(~fire)+
# theme(axis.text.x=element_blank(),
#       axis.ticks.x=element_blank(),
#       axis.text.y=element_blank(),
#       axis.ticks.y=element_blank()) +
scale_color_gradientn(colours = rainbow(5,rev=T)) +
guides(size="none",alpha="none") +
# scale_color_gradient(low="blue", high="red")+
ggtitle("Distribución espacial de dens_poblacion")
ggplot(data = prov) +
geom_sf() +
geom_sf(data = datos, aes(color=dens_poblacion, size= dens_poblacion, alpha=dens_poblacion)) +
# facet_wrap(~fire)+
# theme(axis.text.x=element_blank(),
#       axis.ticks.x=element_blank(),
#       axis.text.y=element_blank(),
#       axis.ticks.y=element_blank()) +
scale_color_gradientn(colours = rainbow(5,rev=T)) +
guides(size="none",alpha="none") +
# scale_color_gradient(low="blue", high="red")+
ggtitle("Distribución espacial de dens_poblacion") +
theme_minimal()
by(datos$dens_poblacion,datos$fire,summary)
names(datos)
ggplot(data = prov) +
geom_sf() +
geom_sf(data = datos, aes(color=pendiente, size= pendiente, alpha=pendiente)) +
scale_color_gradientn(colours = rainbow(5,rev=T)) +
guides(size="none",alpha="none") +
ggtitle("Distribución espacial de pendiente") +
theme_minimal()
ggplot(data = prov) +
geom_sf() +
geom_sf(data = datos, aes(color=elevacion, size= elevacion, alpha=elevacion)) +
scale_color_gradientn(colours = rainbow(5,rev=T)) +
guides(size="none",alpha="none") +
ggtitle("Distribución espacial de elevacion") +
theme_minimal()
ggplot(data = prov) +
geom_sf() +
geom_sf(data = datos, aes(color=curvatura, size= curvatura, alpha=curvatura)) +
scale_color_gradientn(colours = rainbow(5,rev=T)) +
guides(size="none",alpha="none") +
ggtitle("Distribución espacial de curvatura") +
theme_minimal()
ggplot(data = prov) +
geom_sf() +
geom_sf(data = datos, aes(color=curvatura, alpha=curvatura)) +
scale_color_gradientn(colours = rainbow(5,rev=T)) +
guides(size="none",alpha="none") +
ggtitle("Distribución espacial de curvatura") +
theme_minimal()
ggplot(data = prov) +
geom_sf() +
geom_sf(data = datos, aes(color=elevacion, size= elevacion, alpha=elevacion)) +
scale_color_gradientn(colours = rainbow(5,rev=T)) +
guides(size="none",alpha="none") +
ggtitle("Distribución espacial de elevacion") +
theme_minimal()
ggplot(data = prov) +
geom_sf() +
geom_sf(data = datos, aes(color=pendiente, size= pendiente, alpha=pendiente)) +
scale_color_gradientn(colours = rainbow(5,rev=T)) +
guides(size="none",alpha="none") +
ggtitle("Distribución espacial de pendiente") +
theme_minimal()
boxplots <- map(names(datos_numeric), ~ ggplot(datos, aes(x = fire, y = .data[[.x]],fill=fire)) +
geom_boxplot() +
guides(fill="none") +
labs(title = paste(.x, "~ fire")))
ggarrange(plotlist = boxplots,ncol=6,nrow=3)
datos_numeric = datos |> select(where(is.numeric)) %>% st_drop_geometry()
boxplots <- map(names(datos_numeric), ~ ggplot(datos, aes(x = fire, y = .data[[.x]],fill=fire)) +
geom_boxplot() +
guides(fill="none") +
labs(title = paste(.x, "~ fire")))
ggarrange(plotlist = boxplots,ncol=6,nrow=3)
boxplots <- map(names(datos_numeric), ~ ggplot(datos, aes(x = fire, y = .data[[.x]],fill=fire)) +
geom_boxplot() +
guides(fill="none") +
labs(title = paste(.x, "~ fire")))
ggarrange(plotlist = boxplots,ncol=6,nrow=3)
boxplots <- map(names(datos_numeric), ~ ggplot(datos, aes(x = fire, y = .data[[.x]],fill=fire)) +
geom_boxplot() +
scale_fill_hue(direction = -1) +
guides(fill="none") +
labs(title = paste(.x, "~ fire")))
ggarrange(plotlist = boxplots,ncol=6,nrow=3)
datos |>
select(fire,where(is.numeric)) |>
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_fill_hue(direction = -1) +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
datos |>
select(fire,where(is.numeric)) |>
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_fill_hue(direction = -1) +
guides(color = guide_legend(override.aes = list(alphaLines = 5)))+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
datos |>
select(fire,where(is.numeric)) |>
head(20) +
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_fill_hue(direction = -1) +
guides(color = guide_legend(override.aes = list(alphaLines = 5)))+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
datos |>
select(fire,where(is.numeric)) |>
head(20) %>%
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_fill_hue(direction = -1) +
guides(color = guide_legend(override.aes = list(alphaLines = 5)))+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
datos |>
select(fire,where(is.numeric)) |>
head(20) %>%
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_fill_hue(direction = -1) +
guides(color = guide_legend(override.aes = list(size = 5)))+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
datos |>
select(fire,where(is.numeric)) |>
head(20) %>%
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_fill_hue(direction = -1) +
guides(color = guide_legend(override.aes = list(size = 50)))+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
datos |>
select(fire,where(is.numeric)) |>
head(20) %>%
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_fill_hue(direction = -1) +
guides(color = guide_legend(override.aes = list(size = 5)))+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
datos |>
select(fire,where(is.numeric)) |>
head(20) %>%
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_fill_hue(direction = -1) +
guides(color = guide_legend(override.aes = list(size = 5,alphaLines=100)))+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
datos |>
select(fire,where(is.numeric)) |>
head(20) %>%
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_fill_hue(direction = -1) +
guides(color = guide_legend(override.aes = list(alphaLines=100)))+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
=100)))+
size
datos |>
select(fire,where(is.numeric)) |>
head(20) %>%
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_fill_hue(direction = -1) +
guides(color = guide_legend(override.aes = list(size=100)))+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
datos |>
select(fire,where(is.numeric)) |>
head(20) %>%
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_fill_hue(direction = -1) +
guides(color ="none")+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
datos |>
select(fire,where(is.numeric)) |>
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_fill_hue(direction = -1) +
guides(color ="none")+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
datos |>
head(200) %>%
select(fire,where(is.numeric)) |>
datos$PRECTOTCORR %>% max
boxplots <- map(names(datos_numeric), ~ ggplot(datos, aes(x = fire, y = .data[[.x]],fill=fire)) +
geom_boxplot() +
scale_fill_hue(direction = -1) +
guides(fill="none") +
labs(title = paste(.x, "~ fire")))
ggarrange(plotlist = boxplots,ncol=6,nrow=3)
histogramas <- map(names(datos_categ), ~ ggplot(datos, aes(x = .data[[.x]], fill = fire)) +
geom_bar(position = "dodge", alpha = 0.8) +
labs(title = .x)+theme(axis.text.x = element_text(size=7)))
ggarrange(plotlist = histogramas, ncol = 2, nrow = ceiling(length(histogramas)/2))
datos_categ <- datos |> select(WD10M,orientacion,enp,uso_suelo) %>% st_drop_geometry()
histogramas <- map(names(datos_categ), ~ ggplot(datos, aes(x = .data[[.x]], fill = fire)) +
geom_bar(position = "dodge", alpha = 0.8) +
labs(title = .x)+theme(axis.text.x = element_text(size=7)))
ggarrange(plotlist = histogramas, ncol = 2, nrow = ceiling(length(histogramas)/2))
histogramas <- map(names(datos_categ), ~ ggplot(datos, aes(x = .data[[.x]], fill = fire)) +
geom_bar(position = "dodge", alpha = 0.8) +
scale_fill_hue(direction = 1) +
labs(title = .x)+theme(axis.text.x = element_text(size=7)))
ggarrange(plotlist = histogramas, ncol = 2, nrow = ceiling(length(histogramas)/2))
histogramas <- map(names(datos_categ), ~ ggplot(datos, aes(x = .data[[.x]], fill = fire)) +
geom_bar(position = "dodge", alpha = 0.8) +
scale_fill_hue(direction = - 1) +
labs(title = .x)+theme(axis.text.x = element_text(size=7)))
ggarrange(plotlist = histogramas, ncol = 2, nrow = ceiling(length(histogramas)/2))
R = cor(datos_numeric)
corrplot(R,method = "ellipse",type = "upper")
corrplot(R,method = "ellipse",type = "down")
corrplot(R,method = "ellipse",type = "lower")
summary(R-diag(diag(R)))
?corrplot
datos |>
head(100) %>%
select(fire,where(is.numeric)) |>
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_fill_hue(direction = 1) +
guides(color ="none")+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
datos |>
head(100) %>%
select(fire,where(is.numeric)) |>
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_fill_hue(direction = 1) +
# guides(color ="none")+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
datos |>
head(100) %>%
select(fire,where(is.numeric)) |>
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_fill_hue(direction = -1) +
# guides(color ="none")+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
datos |>
head(1000) %>%
select(fire,where(is.numeric)) |>
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_fill_hue(direction = -1) +
# guides(color ="none")+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
datos |>
head(1000) %>%
select(fire,where(is.numeric)) |>
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_fill_hue(direction = 1) +
# guides(color ="none")+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
gg_color_hue <- function(n) {
hues = seq(15, 375, length = n + 1)
hcl(h = hues, l = 65, c = 100)[1:n]
}
n = 4
cols = gg_color_hue(n)
dev.new(width = 4, height = 4)
plot(1:n, pch = 16, cex = 2, col = cols)
n = 2
cols = gg_color_hue(n)
dev.new(width = 4, height = 4)
plot(1:n, pch = 16, cex = 2, col = cols)
datos |>
head(1000) %>%
select(fire,where(is.numeric)) |>
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_color_hue(direction = 1) +
# guides(color ="none")+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
datos |>
head(1000) %>%
select(fire,where(is.numeric)) |>
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_color_hue(direction = -1) +
# guides(color ="none")+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
datos |>
head(1000) %>%
select(fire,where(is.numeric)) |>
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_color_hue(direction = -1) +
# guides(color ="none")+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
datos |>
head(1000) %>%
select(fire,where(is.numeric)) |>
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_color_hue(direction = -1) +
# guides(color ="none")+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
names(datos)
datos |>
head(1000) %>%
select(fire,where(is.numeric))
library(tidyverse)
library(skimr)
library(sf)
library(corrplot)
library(GGally) # Coordenadas paralelas
library(ggpubr)
library(mapSpain)
load("salidas_intermedias/datos_strat_depurados_geom_2024-05-03.RData")
datos |>
head(1000) %>%
select(fire,where(is.numeric)) |>
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_color_hue(direction = -1) +
# guides(color ="none")+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
datos_numeric = datos |> select(where(is.numeric)) %>% st_drop_geometry()
datos |>
head(1000) %>%
select(fire,where(is.numeric)) |>
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_color_hue(direction = -1) +
# guides(color ="none")+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
datos |>
select(fire,where(is.numeric)) |>
ggparcoord(columns=2:19,alphaLines=0.1,groupColumn = "fire") +
xlab('') +
ylab('') +
scale_x_discrete(labels=colnames(datos_numeric)) +
scale_color_hue(direction = -1) +
# guides(color ="none")+
theme_minimal() +
ggtitle("Tipificación a normal estándar (por defecto)") +
theme(plot.title = element_text(size = 9),
axis.text.x = element_text(angle = 90))
